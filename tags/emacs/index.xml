<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Emacs on Mohamed Attia's Macrocosm</title><link>https://mohamed.computer/tags/emacs/</link><description>Recent content in Emacs on Mohamed Attia's Macrocosm</description><generator>Hugo</generator><language>en-us</language><copyright>©️ Mohamed Attia</copyright><lastBuildDate>Sun, 24 Mar 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://mohamed.computer/tags/emacs/index.xml" rel="self" type="application/rss+xml"/><item><title>Quick journaling in org-mode in Emacs</title><link>https://mohamed.computer/posts/org-journal/</link><pubDate>Sun, 24 Mar 2024 00:00:00 +0000</pubDate><guid>https://mohamed.computer/posts/org-journal/</guid><description>&lt;p>A while back I started maintaining a journal, it can contain things that I&amp;rsquo;ve learned like new
programming techniques, new commands, new insights, &amp;hellip;etc. The key for me to make this viable
is to be low-friction, so I&amp;rsquo;ve written an Emacs Lisp script that opens a journal in my &lt;code>journal&lt;/code>
directory with today&amp;rsquo;s date as the filename, so whenever I want to write something, I just
hit &lt;code>Ctrl-x-j&lt;/code> in emacs, write what i want and move on. And later on, if I want to check
something in my journal e.g. an obscure command, I can just grep my &lt;code>journal&lt;/code> directory.&lt;/p></description></item><item><title>Barebones python project with a virtual environment in Emacs Lisp</title><link>https://mohamed.computer/posts/elisp-python-project-init/</link><pubDate>Sat, 23 Mar 2024 00:00:00 +0000</pubDate><guid>https://mohamed.computer/posts/elisp-python-project-init/</guid><description>&lt;p>A lot of the time I find myself wanting to have a directory with a basic Python virtual environment initialized in it,
so I wrote the following Emacs Lisp script to do that, you can use it as an interactive function in emacs or as a script that you call from a shell.&lt;/p>
&lt;p>&lt;strong>Remember to change the path and the keybinding to your liking&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-elisp" data-lang="elisp">&lt;span style="display:flex;">&lt;span>&lt;span style="">#&lt;/span>&lt;span style="color:#bb60d5">!&lt;/span> &lt;span style="color:#bb60d5">emacs&lt;/span> &lt;span style="color:#bb60d5">--script&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#60a0b0;font-style:italic">;;; Code:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>(&lt;span style="color:#007020">defun&lt;/span> &lt;span style="color:#bb60d5">setup-python-project-in-directory&lt;/span> (&lt;span style="color:#bb60d5">project-name&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4070a0">&amp;#34;Setup a Python project at PROJECT-NAME with a virtual environment.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">interactive&lt;/span> (&lt;span style="color:#06287e">list&lt;/span> (&lt;span style="color:#06287e">read-string&lt;/span> &lt;span style="color:#4070a0">&amp;#34;Enter the project name: &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4070a0">&amp;#34;frobenius&amp;#34;&lt;/span>)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">let*&lt;/span> ((&lt;span style="color:#bb60d5">project-dir&lt;/span> (&lt;span style="color:#06287e">concat&lt;/span> (&lt;span style="color:#06287e">expand-file-name&lt;/span> &lt;span style="color:#4070a0">&amp;#34;~&amp;#34;&lt;/span>) &lt;span style="color:#4070a0">&amp;#34;/personal/python-playground/&amp;#34;&lt;/span> &lt;span style="color:#bb60d5">project-name&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#bb60d5">venv-cmd&lt;/span> (&lt;span style="color:#06287e">format&lt;/span> &lt;span style="color:#4070a0">&amp;#34;python3 -m venv %s/.venv --prompt %s&amp;#34;&lt;/span> &lt;span style="color:#bb60d5">project-dir&lt;/span> &lt;span style="color:#bb60d5">project-dir&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#bb60d5">exists&lt;/span> (&lt;span style="color:#06287e">file-exists-p&lt;/span> &lt;span style="color:#bb60d5">project-dir&lt;/span>)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">when&lt;/span> &lt;span style="color:#bb60d5">exists&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">if&lt;/span> (&lt;span style="color:#bb60d5">y-or-n-p&lt;/span> (&lt;span style="color:#06287e">format&lt;/span> &lt;span style="color:#4070a0">&amp;#34;Directory %s exists. Delete and recreate? &amp;#34;&lt;/span> &lt;span style="color:#bb60d5">project-dir&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#bb60d5">delete-directory&lt;/span> &lt;span style="color:#bb60d5">project-dir&lt;/span> &lt;span style="color:#60add5">t&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">user-error&lt;/span> &lt;span style="color:#4070a0">&amp;#34;Process cancelled by the user&amp;#34;&lt;/span>)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">unless&lt;/span> &lt;span style="color:#bb60d5">exists&lt;/span> (&lt;span style="color:#bb60d5">make-directory&lt;/span> &lt;span style="color:#bb60d5">project-dir&lt;/span> &lt;span style="color:#60add5">t&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#06287e">message&lt;/span> &lt;span style="color:#4070a0">&amp;#34;Setting up virtual environment...&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#bb60d5">shell-command&lt;/span> &lt;span style="color:#bb60d5">venv-cmd&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#06287e">message&lt;/span> (&lt;span style="color:#06287e">format&lt;/span> &lt;span style="color:#4070a0">&amp;#34;To activate your virtual environment, run: \n\n source %s/.venv/bin/activate&amp;#34;&lt;/span> &lt;span style="color:#bb60d5">project-dir&lt;/span>))))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>(&lt;span style="color:#007020">when&lt;/span> &lt;span style="color:#bb60d5">noninteractive&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">let&lt;/span> ((&lt;span style="color:#bb60d5">project-name&lt;/span> (&lt;span style="color:#06287e">car&lt;/span> &lt;span style="color:#bb60d5">command-line-args-left&lt;/span>)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">if&lt;/span> (&lt;span style="color:#007020">or&lt;/span> (&lt;span style="color:#06287e">null&lt;/span> &lt;span style="color:#bb60d5">project-name&lt;/span>) (&lt;span style="color:#bb60d5">string=&lt;/span> &lt;span style="color:#bb60d5">project-name&lt;/span> &lt;span style="color:#4070a0">&amp;#34;&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#007020">error&lt;/span> &lt;span style="color:#4070a0">&amp;#34;No project name provided. Usage: script %s &amp;lt;project-name&amp;gt;&amp;#34;&lt;/span> &lt;span style="color:#bb60d5">load-file-name&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#bb60d5">setup-python-project-in-directory&lt;/span> &lt;span style="color:#bb60d5">project-name&lt;/span>))))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>(&lt;span style="color:#bb60d5">global-set-key&lt;/span> (&lt;span style="color:#bb60d5">kbd&lt;/span> &lt;span style="color:#4070a0">&amp;#34;C-x p y&amp;#34;&lt;/span>) &lt;span style="color:#517918">&amp;#39;setup-python-project-in-directory&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>(&lt;span style="color:#007020">provide&lt;/span> &lt;span style="color:#517918">&amp;#39;setup-python-project-in-directory&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>I haven&amp;rsquo;t bothered to make a proper shebang but check &lt;a href="https://gist.github.com/Kreyren/a12e3618525477c3dd5fb16c3de45bf3#making-emacs-lisp-scripts-executable">this&lt;/a> out if you&amp;rsquo;re interested in doing that.&lt;/p></description></item></channel></rss>